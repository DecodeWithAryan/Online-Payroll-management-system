CREATE DATABASE IF NOT EXISTS payrolldb;
USE payrolldb;

CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(120),
  email VARCHAR(150) UNIQUE,
  password VARCHAR(255),
  role VARCHAR(30) DEFAULT 'employee',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS employees (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(120),
  email VARCHAR(150),
  department VARCHAR(80),
  basic_salary DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS attendance (
  id INT AUTO_INCREMENT PRIMARY KEY,
  employee_id INT,
  date DATE,
  status ENUM('present','absent','leave') DEFAULT 'present',
  FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS payroll (
  id INT AUTO_INCREMENT PRIMARY KEY,
  employee_id INT,
  month VARCHAR(10),
  basic DECIMAL(10,2),
  hra DECIMAL(10,2),
  pf DECIMAL(10,2),
  tds DECIMAL(10,2),
  net_salary DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE
);


//execute these two when you tackle with any error
ALTER TABLE payroll 
ADD COLUMN da DOUBLE;


ALTER TABLE payroll 
ADD COLUMN hra DOUBLE,
ADD COLUMN da DOUBLE,
ADD COLUMN pf DOUBLE,
ADD COLUMN tds DOUBLE,
ADD COLUMN net_salary DOUBLE;

